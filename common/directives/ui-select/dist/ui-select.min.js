!function(){"use strict";function e(){return{restrict:"E",template:'<input id={{id}} ng-model="ngModel" ng-disabled="ngDisabled" ng-class="ngclass" bf-select2="bfConfig" type="hidden" />',scope:{id:"@?",ngModel:"=",ngDisabled:"=",ngChange:"&",ngclass:"=",descriptionField:"@",allowClear:"=",multiple:"@",addValue:"=",search:"=",formatSelection:"&",formatResult:"&",formatValue:"&",minimumResultsForSearch:"@",minimumInputLength:"@",maximumInputLength:"@",placeholder:"=?",dropdownCssClass:"=?",dropdownAutoWidth:"=?",debounceDelay:"@"},compile:function(e,n){var t=angular.isDefined(n.multiple);return t&&e.children("input").attr("multiple",!0),{post:function(e,n,o,i){e.multiple=t;var a=n.children("input");a.on("select2-blur change",function(){e.$apply(i.$setTouched())}).on("change",function(){e.$apply(i.$setDirty())}),e.$watch("placeholder",function(e){a.attr("placeholder",e||" ")}),e.$watch("ngModel",function(n,t){n!==t&&(e.ngChange||angular.noop)()})}}},controller:n,controllerAs:"vm",require:"ngModel"}}function n(e,n){function t(n,t){return e.addValue(n).then(function(n){if(!n)return n;if(n=n.plain?n.plain():n,e.multiple){var o=$(t).select2("data");o.push(n),e.ngModel=o}else e.ngModel=n}),!1}function o(){}function i(n){var t=e.formatResult({data:n});return t||(t=n[e.descriptionField||"descricao"],n.added||(t=_.escape(t))),t}function a(n){return e.formatSelection({data:n})||i(n)}function r(n){var t={};return t[e.descriptionField||"descricao"]=n,t}function l(n){return e.formatValue({data:n})||n}function u(n,t){return n.term=encodeURI(n.term),e.search(n).then(function(e){t({results:e.content,more:e.hasNext})})}var c={allowClear:e.allowClear!==!1,dropdownAutoWidth:e.dropdownAutoWidth===!0,initSelection:o,formatResult:i,formatSelection:a,formatValue:l,formatNewChoice:r,result:u};e.debounceDelay&&(c.result=_.debounce(u,e.debounceDelay)),e.minimumResultsForSearch&&(c.minimumResultsForSearch=e.minimumResultsForSearch),e.minimumInputLength&&(c.minimumInputLength=Number.parseInt(e.minimumInputLength)),e.maximumInputLength&&(c.maximumInputLength=Number.parseInt(e.maximumInputLength)),e.addValue&&(c.onAdd=t),e.dropdownCssClass&&(c.dropdownCssClass=e.dropdownCssClass),e.bfConfig=n.create(c)}angular.module("ui-components").directive("uiSelect",e),e.$inject=[],n.$inject=["$scope","bfc.Select2Config"]}();
!function(){"use strict";function e(){return{restrict:"E",template:'<input type="hidden"/>',scope:{model:"=ngModel",ngDisabled:"=",multiple:"@",options:"=",allowClear:"=?",minimumResultsForSearch:"=?",formatSelection:"&",formatResult:"&",filterResult:"&",placeholder:"@",dropdownCssClass:"=?",dropdownAutoWidth:"=?"},compile:function(){return{post:t}},require:"ngModel"}}function t(e,t,n,r){function l(t){return angular.isDefined(n.formatResult)?e.formatResult({data:t}):t.description}function u(t){return angular.isDefined(n.formatSelection)?e.formatSelection({data:t}):l(t)}function i(e){return e}function o(t,r){var u=r;if(r.children&&r.children.length){var i=a(t,r.children);if(i&&i.length)return u={},angular.forEach(r,function(e,t){this[t]=e},u),u.children=i,u}if(angular.isDefined(n.filterResult)){if(e.filterResult({term:t,value:r}))return u}else if(_.deburr(l(r)).match(new RegExp(_.deburr(_.escapeRegExp(t)),"gi")))return u;return null}function a(e,t){var n=[];return t&&t.length&&t.forEach(function(t){var r=o(e,t);r&&n.push(r)}),n}function s(t){return e.options.then(function(e){t.callback({results:a(t.term,e.values),more:!1})})}var c=angular.isDefined(n.multiple),d=t.find("input");d.select2({query:s,formatResult:l,formatSelection:u,formatValue:i,minimumResultsForSearch:angular.isDefined(e.minimumResultsForSearch)?e.minimumResultsForSearch:0,allowClear:e.allowClear!==!1,multiple:c,placeholder:e.placeholder||" ",dropdownCssClass:e.dropdownCssClass,dropdownAutoWidth:e.dropdownAutoWidth===!0}).on("select2-blur",function(){e.$apply(r.$setTouched()),t.blur()}).on("change",function(){e.$apply(function(){r.$setTouched(),r.$setDirty();var t=d.select2("data"),n=null;n=c?_.map(t,_.property("id"))||[]:_.get(t,"id"),angular.equals(n,e.model)||r.$setViewValue(n)})}),e.$watch("ngDisabled",function(e){d.select2("enable",!e)}),e.$watch("model",function(t){return t?void e.options.then(function(e){var n=null;c?(n=[],t.forEach(function(t){n.push(e[t])})):n=e[t],angular.equals(n,d.select2("data"))||d.select2("data",n)}):void d.select2("data",null)})}angular.module("ui-components").directive("uiSelectEnum",e),e.$inject=[]}();
!function(){"use strict";function e(){return{restrict:"E",template:'<input id={{id}} ng-class="ngclass" type="hidden" placeholder=" " />',require:"ngModel",scope:{id:"@?",model:"=ngModel",ngDisabled:"=",ngclass:"=",allowClear:"=?",trueDescription:"@",falseDescription:"@",dropdownCssClass:"=?",dropdownAutoWidth:"=?"},link:t}}function t(e,t,l,o){function i(e){return"true"===e||"false"!==e&&null}function a(e){return e===!0?"true":e===!1?"false":null}function c(e,t){var n=i(u.select2("val"));t(null===n?null:s[n?0:1])}var s=angular.copy(n),u=t.find("input");u.select2({data:s,initSelection:c,allowClear:e.allowClear!==!1,dropdownCssClass:e.dropdownCssClass,dropdownAutoWidth:e.dropdownAutoWidth===!0}).on("select2-blur",function(){e.$apply(o.$setTouched()),t.blur()}).on("change",function(t){e.$apply(function(){o.$setTouched(),o.$setDirty(),e.model=i(t.val)})}),e.$watch("model",function(e){u.select2("val",a(e))}),e.$watch("ngDisabled",function(e){u.select2("enable",!e)}),e.$watch("trueDescription",function(t){t&&(s[0].text=t,u.select2("val",a(e.model)))}),e.$watch("falseDescription",function(t){t&&(s[1].text=t,u.select2("val",a(e.model)))})}angular.module("ui-components").directive("uiSelectBoolean",e),e.$inject=[];var n=[{id:"true",text:"Sim"},{id:"false",text:"NÃ£o"}]}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVpLXNlbGVjdC5kaXJlY3RpdmUuanMiLCJ1aS1zZWxlY3QtZW51bS5kaXJlY3RpdmUuanMiLCJ1aS1zZWxlY3QtYm9vbGVhbi1kaXJlY3RpdmUuanMiXSwibmFtZXMiOlsiU2VsZWN0RGlyZWN0aXZlIiwicmVzdHJpY3QiLCJ0ZW1wbGF0ZSIsInNjb3BlIiwiaWQiLCJuZ01vZGVsIiwibmdEaXNhYmxlZCIsIm5nQ2hhbmdlIiwibmdjbGFzcyIsImRlc2NyaXB0aW9uRmllbGQiLCJhbGxvd0NsZWFyIiwibXVsdGlwbGUiLCJhZGRWYWx1ZSIsInNlYXJjaCIsImZvcm1hdFNlbGVjdGlvbiIsImZvcm1hdFJlc3VsdCIsImZvcm1hdFZhbHVlIiwibWluaW11bVJlc3VsdHNGb3JTZWFyY2giLCJtaW5pbXVtSW5wdXRMZW5ndGgiLCJtYXhpbXVtSW5wdXRMZW5ndGgiLCJwbGFjZWhvbGRlciIsImRyb3Bkb3duQ3NzQ2xhc3MiLCJkcm9wZG93bkF1dG9XaWR0aCIsImRlYm91bmNlRGVsYXkiLCJjb21waWxlIiwiZWxlbWVudCIsInRBdHRycyIsImFuZ3VsYXIiLCJpc0RlZmluZWQiLCJjaGlsZHJlbiIsImF0dHIiLCJwb3N0IiwiJHNjb3BlIiwiJGVsZW1lbnQiLCIkYXR0cnMiLCIkY3RybCIsImlucHV0Iiwib24iLCIkYXBwbHkiLCIkc2V0VG91Y2hlZCIsIiRzZXREaXJ0eSIsIiR3YXRjaCIsIm5ld1ZhbHVlIiwib2xkVmFsdWUiLCJub29wIiwiY29udHJvbGxlciIsIlNlbGVjdERpcmVjdGl2ZUNvbnRyb2xsZXIiLCJjb250cm9sbGVyQXMiLCJyZXF1aXJlIiwic2VsZWN0MkNvbmZpZyIsIl9hZGRWYWx1ZSIsInZhbHVlIiwidGFyZ2V0IiwidGhlbiIsImRhdGEiLCJwbGFpbiIsIiQiLCJzZWxlY3QyIiwicHVzaCIsIl9pbml0U2VsZWN0aW9uIiwiX2Zvcm1hdFJlc3VsdCIsImZvcm1hdHRlZFZhbHVlIiwiYWRkZWQiLCJfIiwiZXNjYXBlIiwiX2Zvcm1hdFNlbGVjdGlvbiIsIl9mb3JtYXROZXdDaG9pY2UiLCJ0ZXh0IiwiY2hvaXNlIiwiX2Zvcm1hdFZhbHVlIiwiX3Jlc3VsdCIsInBhcmFtcyIsImNhbGxiYWNrIiwidGVybSIsImVuY29kZVVSSSIsInJlc3VsdHMiLCJjb250ZW50IiwibW9yZSIsImhhc05leHQiLCJjb25maWciLCJpbml0U2VsZWN0aW9uIiwiZm9ybWF0TmV3Q2hvaWNlIiwicmVzdWx0IiwiZGVib3VuY2UiLCJOdW1iZXIiLCJwYXJzZUludCIsIm9uQWRkIiwiYmZDb25maWciLCJjcmVhdGUiLCJtb2R1bGUiLCJkaXJlY3RpdmUiLCIkaW5qZWN0IiwiU2VsZWN0RW51bURpcmVjdGl2ZSIsIm1vZGVsIiwib3B0aW9ucyIsImZpbHRlclJlc3VsdCIsIlNlbGVjdEVudW1EaXJlY3RpdmVQb3N0TGluayIsImRlc2NyaXB0aW9uIiwiX2ZpbHRlclJlc3VsdCIsImxlbmd0aCIsImZpbHRlcmVkQ2hpbGRyZW4iLCJfZmlsdGVyUmVzdWx0cyIsImZvckVhY2giLCJvYmoiLCJ0aGlzIiwiZGVidXJyIiwibWF0Y2giLCJSZWdFeHAiLCJlc2NhcGVSZWdFeHAiLCJ2YWx1ZXMiLCJmaWx0ZXJlZFZhbHVlcyIsInNlbGVjdDJFbGVtZW50IiwiZmluZCIsInF1ZXJ5IiwiYmx1ciIsIm1hcCIsInByb3BlcnR5IiwiZ2V0IiwiZXF1YWxzIiwiJHNldFZpZXdWYWx1ZSIsIm5ld09iamVjdE1vZGVsVmFsdWUiLCJpdGVtIiwiRGlyZWN0aXZlRGVmaW5pdGlvbiIsInRydWVEZXNjcmlwdGlvbiIsImZhbHNlRGVzY3JpcHRpb24iLCJsaW5rIiwicG9zdExpbmsiLCJ0b0Jvb2xlYW4iLCJzdHIiLCJ0b1N0cmluZyIsImJvb2xlYW4iLCJib29sZWFuVmFsdWUiLCJjb3B5IiwiZGVmYXVsdERhdGEiLCJldmVudCIsInZhbCJdLCJtYXBwaW5ncyI6IkNBQUEsV0FDSSxZQUtBLFNBQVNBLEtBQ0wsT0FDSUMsU0FBVSxJQUNWQyxTQUFVLHlIQUNWQyxPQUNJQyxHQUFJLEtB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QUFROEQsT0FBTyxpQkFBaUJDLFVBQVUsa0JBQW1CZ0MsR0FFN0RBLEVBQW9CL0IsVUEwQnBCLElBQUkwQyxLQUNDakksR0FBSSxPQUFRK0QsS0FBTSxRQUNsQi9ELEdBQUksUUFBUytELEtBQU0iLCJmaWxlIjoidWktc2VsZWN0Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ3VpLWNvbXBvbmVudHMnKS5kaXJlY3RpdmUoJ3VpU2VsZWN0JywgU2VsZWN0RGlyZWN0aXZlKTtcclxuICAgIFNlbGVjdERpcmVjdGl2ZS4kaW5qZWN0ID0gW107XHJcblxyXG4gICAgZnVuY3Rpb24gU2VsZWN0RGlyZWN0aXZlKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXHJcbiAgICAgICAgICAgIHRlbXBsYXRlOiAnPGlucHV0IGlkPXt7aWR9fSBuZy1tb2RlbD1cIm5nTW9kZWxcIiBuZy1kaXNhYmxlZD1cIm5nRGlzYWJsZWRcIiBuZy1jbGFzcz1cIm5nY2xhc3NcIiBiZi1zZWxlY3QyPVwiYmZDb25maWdcIiB0eXBlPVwiaGlkZGVuXCIgLz4nLFxyXG4gICAgICAgICAgICBzY29wZToge1xyXG4gICAgICAgICAgICAgICAgaWQ6ICdAPycsXHJcbiAgICAgICAgICAgICAgICBuZ01vZGVsOiAnPScsXHJcbiAgICAgICAgICAgICAgICBuZ0Rpc2FibGVkOiAnPScsXHJcbiAgICAgICAgICAgICAgICBuZ0NoYW5nZTogJyYnLFxyXG4gICAgICAgICAgICAgICAgbmdjbGFzczogJz0nLCAvL3VzYWRvIG5nY2xhc3MgYW8gaW52w6lzIGRlIG5nQ2xhc3MgcGFyYSBxdWUgYSBkaXJldGl2YSBuw6NvIGFwbGlxdWUgbm8gY29udGFpbmVyXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbkZpZWxkOiAnQCcsXHJcbiAgICAgICAgICAgICAgICBhbGxvd0NsZWFyOiAnPScsXHJcbiAgICAgICAgICAgICAgICBtdWx0aXBsZTogJ0AnLFxyXG4gICAgICAgICAgICAgICAgYWRkVmFsdWU6ICc9JyxcclxuICAgICAgICAgICAgICAgIHNlYXJjaDogJz0nLFxyXG4gICAgICAgICAgICAgICAgZm9ybWF0U2VsZWN0aW9uOiAnJicsXHJcbiAgICAgICAgICAgICAgICBmb3JtYXRSZXN1bHQ6ICcmJyxcclxuICAgICAgICAgICAgICAgIGZvcm1hdFZhbHVlOiAnJicsXHJcbiAgICAgICAgICAgICAgICBtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogJ0AnLFxyXG4gICAgICAgICAgICAgICAgbWluaW11bUlucHV0TGVuZ3RoOiAnQCcsXHJcbiAgICAgICAgICAgICAgICBtYXhpbXVtSW5wdXRMZW5ndGg6ICdAJyxcclxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnPT8nLFxyXG4gICAgICAgICAgICAgICAgZHJvcGRvd25Dc3NDbGFzczogJz0/JyxcclxuICAgICAgICAgICAgICAgIGRyb3Bkb3duQXV0b1dpZHRoOiAnPT8nLFxyXG4gICAgICAgICAgICAgICAgZGVib3VuY2VEZWxheTogJ0AnXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNvbXBpbGU6IGZ1bmN0aW9uIChlbGVtZW50LCB0QXR0cnMpIHtcclxuICAgICAgICAgICAgICAgIHZhciBtdWx0aXBsZSA9IGFuZ3VsYXIuaXNEZWZpbmVkKHRBdHRycy5tdWx0aXBsZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAobXVsdGlwbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmNoaWxkcmVuKCdpbnB1dCcpLmF0dHIoJ211bHRpcGxlJywgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICBwb3N0OiBmdW5jdGlvbiAoJHNjb3BlLCAkZWxlbWVudCwgJGF0dHJzLCAkY3RybCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubXVsdGlwbGUgPSBtdWx0aXBsZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbnB1dCA9ICRlbGVtZW50LmNoaWxkcmVuKCdpbnB1dCcpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbignc2VsZWN0Mi1ibHVyIGNoYW5nZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuJGFwcGx5KCRjdHJsLiRzZXRUb3VjaGVkKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbignY2hhbmdlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS4kYXBwbHkoJGN0cmwuJHNldERpcnR5KCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuJHdhdGNoKCdwbGFjZWhvbGRlcicsIGZ1bmN0aW9uIChwbGFjZWhvbGRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQuYXR0cigncGxhY2Vob2xkZXInLCBwbGFjZWhvbGRlciB8fCAnICcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS4kd2F0Y2goJ25nTW9kZWwnLCBmdW5jdGlvbiAobmV3VmFsdWUsIG9sZFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV3VmFsdWUgIT09IG9sZFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCRzY29wZS5uZ0NoYW5nZSB8fCBhbmd1bGFyLm5vb3ApKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IFNlbGVjdERpcmVjdGl2ZUNvbnRyb2xsZXIsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcclxuICAgICAgICAgICAgcmVxdWlyZTogJ25nTW9kZWwnXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBTZWxlY3REaXJlY3RpdmVDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICdiZmMuU2VsZWN0MkNvbmZpZyddO1xyXG5cclxuICAgIGZ1bmN0aW9uIFNlbGVjdERpcmVjdGl2ZUNvbnRyb2xsZXIoJHNjb3BlLCBzZWxlY3QyQ29uZmlnKSB7XHJcblxyXG4gICAgICAgIHZhciBjb25maWcgPSB7XHJcbiAgICAgICAgICAgIGFsbG93Q2xlYXI6ICRzY29wZS5hbGxvd0NsZWFyICE9PSBmYWxzZSxcclxuICAgICAgICAgICAgLy8gTWFudGVtIGEgc2VsZcOnw6NvIGRvIHRhbWFkbyBubyBpbnB1dFxyXG4gICAgICAgICAgICBkcm9wZG93bkF1dG9XaWR0aDogJHNjb3BlLmRyb3Bkb3duQXV0b1dpZHRoID09PSB0cnVlLFxyXG4gICAgICAgICAgICBpbml0U2VsZWN0aW9uOiBfaW5pdFNlbGVjdGlvbixcclxuICAgICAgICAgICAgZm9ybWF0UmVzdWx0OiBfZm9ybWF0UmVzdWx0LFxyXG4gICAgICAgICAgICBmb3JtYXRTZWxlY3Rpb246IF9mb3JtYXRTZWxlY3Rpb24sXHJcbiAgICAgICAgICAgIGZvcm1hdFZhbHVlOiBfZm9ybWF0VmFsdWUsXHJcbiAgICAgICAgICAgIGZvcm1hdE5ld0Nob2ljZTogX2Zvcm1hdE5ld0Nob2ljZSxcclxuICAgICAgICAgICAgcmVzdWx0OiBfcmVzdWx0XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaWYgKCRzY29wZS5kZWJvdW5jZURlbGF5KSB7XHJcbiAgICAgICAgICAgIGNvbmZpZy5yZXN1bHQgPSBfLmRlYm91bmNlKF9yZXN1bHQsICRzY29wZS5kZWJvdW5jZURlbGF5KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKCRzY29wZS5taW5pbXVtUmVzdWx0c0ZvclNlYXJjaCkge1xyXG4gICAgICAgICAgICBjb25maWcubWluaW11bVJlc3VsdHNGb3JTZWFyY2ggPSAkc2NvcGUubWluaW11bVJlc3VsdHNGb3JTZWFyY2g7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoJHNjb3BlLm1pbmltdW1JbnB1dExlbmd0aCkge1xyXG4gICAgICAgICAgICBjb25maWcubWluaW11bUlucHV0TGVuZ3RoID0gTnVtYmVyLnBhcnNlSW50KCRzY29wZS5taW5pbXVtSW5wdXRMZW5ndGgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCRzY29wZS5tYXhpbXVtSW5wdXRMZW5ndGgpIHtcclxuICAgICAgICAgICAgY29uZmlnLm1heGltdW1JbnB1dExlbmd0aCA9IE51bWJlci5wYXJzZUludCgkc2NvcGUubWF4aW11bUlucHV0TGVuZ3RoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICgkc2NvcGUuYWRkVmFsdWUpIHtcclxuICAgICAgICAgICAgY29uZmlnLm9uQWRkID0gX2FkZFZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCRzY29wZS5kcm9wZG93bkNzc0NsYXNzKSB7XHJcbiAgICAgICAgICAgIGNvbmZpZy5kcm9wZG93bkNzc0NsYXNzID0gJHNjb3BlLmRyb3Bkb3duQ3NzQ2xhc3M7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkc2NvcGUuYmZDb25maWcgPSBzZWxlY3QyQ29uZmlnLmNyZWF0ZShjb25maWcpO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBfYWRkVmFsdWUodmFsdWUsIHRhcmdldCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuYWRkVmFsdWUodmFsdWUpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIWRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBkYXRhID0gZGF0YS5wbGFpbiA/IGRhdGEucGxhaW4oKSA6IGRhdGE7XHJcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLm11bHRpcGxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gJCh0YXJnZXQpLnNlbGVjdDIoJ2RhdGEnKTtcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZS5wdXNoKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5uZ01vZGVsID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5uZ01vZGVsID0gZGF0YTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIF9pbml0U2VsZWN0aW9uKCkge1xyXG4gICAgICAgICAgICAvL2Z1bmN0aW9uIF9pbml0U2VsZWN0aW9uKGVsZW1lbnQsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBfZm9ybWF0UmVzdWx0KGRhdGEpIHtcclxuICAgICAgICAgICAgdmFyIGZvcm1hdHRlZFZhbHVlID0gJHNjb3BlLmZvcm1hdFJlc3VsdCh7XHJcbiAgICAgICAgICAgICAgICBkYXRhOiBkYXRhXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYoIWZvcm1hdHRlZFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZWRWYWx1ZSA9IGRhdGFbJHNjb3BlLmRlc2NyaXB0aW9uRmllbGQgfHwgJ2Rlc2NyaWNhbyddO1xyXG4gICAgICAgICAgICAgICAgaWYoIWRhdGEuYWRkZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWRWYWx1ZSA9IF8uZXNjYXBlKGZvcm1hdHRlZFZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZvcm1hdHRlZFZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gTyBxdWUgYXBhcmVjZSBxdWFuZG8gw6kgc2VsZWNpb25hZG8gdW0gaXRlbS5cclxuICAgICAgICBmdW5jdGlvbiBfZm9ybWF0U2VsZWN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRzY29wZS5mb3JtYXRTZWxlY3Rpb24oe1xyXG4gICAgICAgICAgICAgICAgZGF0YTogZGF0YVxyXG4gICAgICAgICAgICB9KSB8fCBfZm9ybWF0UmVzdWx0KGRhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gX2Zvcm1hdE5ld0Nob2ljZSh0ZXh0KSB7XHJcbiAgICAgICAgICAgIHZhciBjaG9pc2UgPSB7fTtcclxuICAgICAgICAgICAgY2hvaXNlWyRzY29wZS5kZXNjcmlwdGlvbkZpZWxkIHx8ICdkZXNjcmljYW8nXSA9IHRleHQ7XHJcbiAgICAgICAgICAgIHJldHVybiBjaG9pc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBPIHF1ZSDDqSBlbnZpYWRvIHBhcmEgbyBzZXJ2ZXIuXHJcbiAgICAgICAgZnVuY3Rpb24gX2Zvcm1hdFZhbHVlKGRhdGEpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRzY29wZS5mb3JtYXRWYWx1ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogZGF0YVxyXG4gICAgICAgICAgICAgICAgfSkgfHwgZGF0YTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIF9yZXN1bHQocGFyYW1zLCBjYWxsYmFjaykge1xyXG4gICAgICAgICAgICBwYXJhbXMudGVybSA9IGVuY29kZVVSSShwYXJhbXMudGVybSk7XHJcbiAgICAgICAgICAgIHJldHVybiAkc2NvcGUuc2VhcmNoKHBhcmFtcykudGhlbihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soe1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHM6IGRhdGEuY29udGVudCxcclxuICAgICAgICAgICAgICAgICAgICBtb3JlOiBkYXRhLmhhc05leHRcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgndWktY29tcG9uZW50cycpLmRpcmVjdGl2ZSgndWlTZWxlY3RFbnVtJywgU2VsZWN0RW51bURpcmVjdGl2ZSk7XHJcbiAgICBTZWxlY3RFbnVtRGlyZWN0aXZlLiRpbmplY3QgPSBbXTtcclxuXHJcbiAgICBmdW5jdGlvbiBTZWxlY3RFbnVtRGlyZWN0aXZlKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXHJcbiAgICAgICAgICAgIHRlbXBsYXRlOiAnPGlucHV0IHR5cGU9XCJoaWRkZW5cIi8+JyxcclxuICAgICAgICAgICAgc2NvcGU6IHtcclxuICAgICAgICAgICAgICAgIG1vZGVsOiAnPW5nTW9kZWwnLFxyXG4gICAgICAgICAgICAgICAgbmdEaXNhYmxlZDogJz0nLFxyXG4gICAgICAgICAgICAgICAgbXVsdGlwbGU6ICdAJyxcclxuICAgICAgICAgICAgICAgIG9wdGlvbnM6ICc9JyxcclxuICAgICAgICAgICAgICAgIGFsbG93Q2xlYXI6ICc9PycsXHJcbiAgICAgICAgICAgICAgICBtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogJz0/JyxcclxuICAgICAgICAgICAgICAgIGZvcm1hdFNlbGVjdGlvbjogJyYnLFxyXG4gICAgICAgICAgICAgICAgZm9ybWF0UmVzdWx0OiAnJicsXHJcbiAgICAgICAgICAgICAgICBmaWx0ZXJSZXN1bHQ6ICcmJyxcclxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBcIkBcIixcclxuICAgICAgICAgICAgICAgIGRyb3Bkb3duQ3NzQ2xhc3M6ICc9PycsXHJcbiAgICAgICAgICAgICAgICBkcm9wZG93bkF1dG9XaWR0aDogJz0/J1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjb21waWxlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHBvc3Q6IFNlbGVjdEVudW1EaXJlY3RpdmVQb3N0TGlua1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgcmVxdWlyZTogJ25nTW9kZWwnXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBTZWxlY3RFbnVtRGlyZWN0aXZlUG9zdExpbmsoJHNjb3BlLCAkZWxlbWVudCwgJGF0dHJzLCAkY3RybCkge1xyXG5cclxuICAgICAgICB2YXIgbXVsdGlwbGUgPSBhbmd1bGFyLmlzRGVmaW5lZCgkYXR0cnMubXVsdGlwbGUpO1xyXG4gICAgICAgIHZhciBzZWxlY3QyRWxlbWVudCA9ICRlbGVtZW50LmZpbmQoJ2lucHV0Jyk7XHJcblxyXG4gICAgICAgIHNlbGVjdDJFbGVtZW50XHJcbiAgICAgICAgICAgIC5zZWxlY3QyKHtcclxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBfcmVzdWx0LFxyXG4gICAgICAgICAgICAgICAgZm9ybWF0UmVzdWx0OiBfZm9ybWF0UmVzdWx0LFxyXG4gICAgICAgICAgICAgICAgZm9ybWF0U2VsZWN0aW9uOiBfZm9ybWF0U2VsZWN0aW9uLFxyXG4gICAgICAgICAgICAgICAgZm9ybWF0VmFsdWU6IF9mb3JtYXRWYWx1ZSxcclxuICAgICAgICAgICAgICAgIG1pbmltdW1SZXN1bHRzRm9yU2VhcmNoOiBhbmd1bGFyLmlzRGVmaW5lZCgkc2NvcGUubWluaW11bVJlc3VsdHNGb3JTZWFyY2gpID8gJHNjb3BlLm1pbmltdW1SZXN1bHRzRm9yU2VhcmNoIDogMCxcclxuICAgICAgICAgICAgICAgIGFsbG93Q2xlYXI6ICRzY29wZS5hbGxvd0NsZWFyICE9PSBmYWxzZSxcclxuICAgICAgICAgICAgICAgIG11bHRpcGxlOiBtdWx0aXBsZSxcclxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAkc2NvcGUucGxhY2Vob2xkZXIgfHwgJyAnLFxyXG4gICAgICAgICAgICAgICAgZHJvcGRvd25Dc3NDbGFzczogJHNjb3BlLmRyb3Bkb3duQ3NzQ2xhc3MsXHJcbiAgICAgICAgICAgICAgICBkcm9wZG93bkF1dG9XaWR0aDogJHNjb3BlLmRyb3Bkb3duQXV0b1dpZHRoID09PSB0cnVlXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5vbignc2VsZWN0Mi1ibHVyJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLiRhcHBseSgkY3RybC4kc2V0VG91Y2hlZCgpKTtcclxuICAgICAgICAgICAgICAgICRlbGVtZW50LmJsdXIoKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAkY3RybC4kc2V0VG91Y2hlZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICRjdHJsLiRzZXREaXJ0eSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHNlbGVjdDJFbGVtZW50LnNlbGVjdDIoJ2RhdGEnKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3VmFsdWUgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChtdWx0aXBsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZSA9IF8ubWFwKGRhdGEsXy5wcm9wZXJ0eSgnaWQnKSkgfHwgW107XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWUgPV8uZ2V0KGRhdGEsICdpZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWFuZ3VsYXIuZXF1YWxzKG5ld1ZhbHVlLCAkc2NvcGUubW9kZWwpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRjdHJsLiRzZXRWaWV3VmFsdWUobmV3VmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJHNjb3BlLiR3YXRjaCgnbmdEaXNhYmxlZCcsIGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICBzZWxlY3QyRWxlbWVudC5zZWxlY3QyKCdlbmFibGUnLCAhdmFsdWUpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkc2NvcGUuJHdhdGNoKCdtb2RlbCcsIGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICBpZiAoIXZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3QyRWxlbWVudC5zZWxlY3QyKCdkYXRhJywgbnVsbCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICRzY29wZS5vcHRpb25zLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIHZhciBuZXdPYmplY3RNb2RlbFZhbHVlID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIGlmIChtdWx0aXBsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld09iamVjdE1vZGVsVmFsdWUgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld09iamVjdE1vZGVsVmFsdWUucHVzaChkYXRhW2l0ZW1dKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3T2JqZWN0TW9kZWxWYWx1ZSA9IGRhdGFbdmFsdWVdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICghYW5ndWxhci5lcXVhbHMobmV3T2JqZWN0TW9kZWxWYWx1ZSwgc2VsZWN0MkVsZW1lbnQuc2VsZWN0MignZGF0YScpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdDJFbGVtZW50LnNlbGVjdDIoJ2RhdGEnLCBuZXdPYmplY3RNb2RlbFZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIF9mb3JtYXRSZXN1bHQoZGF0YSkge1xyXG4gICAgICAgICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQoJGF0dHJzLmZvcm1hdFJlc3VsdCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAkc2NvcGUuZm9ybWF0UmVzdWx0KHtkYXRhOiBkYXRhfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBkYXRhLmRlc2NyaXB0aW9uO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gTyBxdWUgYXBhcmVjZSBxdWFuZG8gw6kgc2VsZWNpb25hZG8gdW0gaXRlbS5cclxuICAgICAgICBmdW5jdGlvbiBfZm9ybWF0U2VsZWN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKCRhdHRycy5mb3JtYXRTZWxlY3Rpb24pKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJHNjb3BlLmZvcm1hdFNlbGVjdGlvbih7ZGF0YTogZGF0YX0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gX2Zvcm1hdFJlc3VsdChkYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIF9mb3JtYXRWYWx1ZShkYXRhKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gX2ZpbHRlclJlc3VsdCh0ZXJtLCB2YWx1ZSkge1xyXG4gICAgICAgICAgICB2YXIgbmV3VmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgaWYgKHZhbHVlLmNoaWxkcmVuICYmIHZhbHVlLmNoaWxkcmVuLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGZpbHRlcmVkQ2hpbGRyZW4gPSBfZmlsdGVyUmVzdWx0cyh0ZXJtLCB2YWx1ZS5jaGlsZHJlbik7XHJcbiAgICAgICAgICAgICAgICBpZiAoZmlsdGVyZWRDaGlsZHJlbiAmJiBmaWx0ZXJlZENoaWxkcmVuLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKHZhbHVlLCBmdW5jdGlvbiAob2JqLCBhdHRyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNbYXR0cl0gPSBvYmo7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgbmV3VmFsdWUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZS5jaGlsZHJlbiA9IGZpbHRlcmVkQ2hpbGRyZW47XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ld1ZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQoJGF0dHJzLmZpbHRlclJlc3VsdCkpIHtcclxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuZmlsdGVyUmVzdWx0KHt0ZXJtOiB0ZXJtLCB2YWx1ZTogdmFsdWV9KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdWYWx1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChfLmRlYnVycihfZm9ybWF0UmVzdWx0KHZhbHVlKSkubWF0Y2gobmV3IFJlZ0V4cChfLmRlYnVycihfLmVzY2FwZVJlZ0V4cCh0ZXJtKSksICdnaScpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdWYWx1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBfZmlsdGVyUmVzdWx0cyh0ZXJtLCB2YWx1ZXMpIHtcclxuICAgICAgICAgICAgdmFyIGZpbHRlcmVkVmFsdWVzID0gW107XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZXMgJiYgdmFsdWVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdmFsdWVzLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld1ZhbHVlID0gX2ZpbHRlclJlc3VsdCh0ZXJtLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1ZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcmVkVmFsdWVzLnB1c2gobmV3VmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZmlsdGVyZWRWYWx1ZXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBfcmVzdWx0KHBhcmFtcykge1xyXG4gICAgICAgICAgICByZXR1cm4gJHNjb3BlLm9wdGlvbnMudGhlbihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgcGFyYW1zLmNhbGxiYWNrKHtyZXN1bHRzOiBfZmlsdGVyUmVzdWx0cyhwYXJhbXMudGVybSwgZGF0YS52YWx1ZXMpLCBtb3JlOiBmYWxzZX0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0pXHJcbigpO1xyXG4iLCIoZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCd1aS1jb21wb25lbnRzJykuZGlyZWN0aXZlKCd1aVNlbGVjdEJvb2xlYW4nLCBEaXJlY3RpdmVEZWZpbml0aW9uKTtcclxuXHJcbiAgICBEaXJlY3RpdmVEZWZpbml0aW9uLiRpbmplY3QgPSBbXTtcclxuICAgIGZ1bmN0aW9uIERpcmVjdGl2ZURlZmluaXRpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcclxuICAgICAgICAgICAgdGVtcGxhdGU6ICc8aW5wdXQgaWQ9e3tpZH19IG5nLWNsYXNzPVwibmdjbGFzc1wiIHR5cGU9XCJoaWRkZW5cIiBwbGFjZWhvbGRlcj1cIiBcIiAvPicsXHJcblxyXG4gICAgICAgICAgICByZXF1aXJlOiAnbmdNb2RlbCcsXHJcblxyXG4gICAgICAgICAgICBzY29wZToge1xyXG4gICAgICAgICAgICAgICAgaWQ6ICdAPycsXHJcbiAgICAgICAgICAgICAgICBtb2RlbDogJz1uZ01vZGVsJyxcclxuICAgICAgICAgICAgICAgIG5nRGlzYWJsZWQ6ICc9JyxcclxuICAgICAgICAgICAgICAgIG5nY2xhc3M6ICc9JywvL3VzYWRvIG5nY2xhc3MgYW8gaW52w6lzIGRlIG5nQ2xhc3MgcGFyYSBxdWUgYSBkaXJldGl2YSBuw6NvIGFwbGlxdWUgbm8gY29udGFpbmVyXHJcbiAgICAgICAgICAgICAgICBhbGxvd0NsZWFyOiAnPT8nLFxyXG5cclxuICAgICAgICAgICAgICAgIHRydWVEZXNjcmlwdGlvbjogJ0AnLFxyXG4gICAgICAgICAgICAgICAgZmFsc2VEZXNjcmlwdGlvbjogJ0AnLFxyXG5cclxuICAgICAgICAgICAgICAgIGRyb3Bkb3duQ3NzQ2xhc3M6ICc9PycsXHJcbiAgICAgICAgICAgICAgICBkcm9wZG93bkF1dG9XaWR0aDogJz0/J1xyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgbGluazogcG9zdExpbmtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBkZWZhdWx0RGF0YSA9IFtcclxuICAgICAgICB7aWQ6ICd0cnVlJywgdGV4dDogJ1NpbSd9LFxyXG4gICAgICAgIHtpZDogJ2ZhbHNlJywgdGV4dDogJ07Do28nfVxyXG4gICAgXTtcclxuXHJcbiAgICBmdW5jdGlvbiBwb3N0TGluaygkc2NvcGUsICRlbGVtZW50LCAkYXR0cnMsICRjdHJsKSB7XHJcbiAgICAgICAgdmFyIGRhdGEgPSBhbmd1bGFyLmNvcHkoZGVmYXVsdERhdGEpO1xyXG5cclxuICAgICAgICB2YXIgc2VsZWN0MkVsZW1lbnQgPSAkZWxlbWVudC5maW5kKCdpbnB1dCcpO1xyXG5cclxuICAgICAgICBzZWxlY3QyRWxlbWVudFxyXG4gICAgICAgICAgICAuc2VsZWN0Mih7XHJcbiAgICAgICAgICAgICAgICBkYXRhOiBkYXRhLFxyXG4gICAgICAgICAgICAgICAgaW5pdFNlbGVjdGlvbjogaW5pdFNlbGVjdGlvbixcclxuICAgICAgICAgICAgICAgIGFsbG93Q2xlYXI6ICRzY29wZS5hbGxvd0NsZWFyICE9PSBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGRyb3Bkb3duQ3NzQ2xhc3M6ICRzY29wZS5kcm9wZG93bkNzc0NsYXNzLFxyXG4gICAgICAgICAgICAgICAgZHJvcGRvd25BdXRvV2lkdGg6ICRzY29wZS5kcm9wZG93bkF1dG9XaWR0aCA9PT0gdHJ1ZVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAub24oJ3NlbGVjdDItYmx1cicsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS4kYXBwbHkoJGN0cmwuJHNldFRvdWNoZWQoKSk7XHJcbiAgICAgICAgICAgICAgICAkZWxlbWVudC5ibHVyKCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5vbignY2hhbmdlJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAkY3RybC4kc2V0VG91Y2hlZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICRjdHJsLiRzZXREaXJ0eSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5tb2RlbCA9IHRvQm9vbGVhbihldmVudC52YWwpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkc2NvcGUuJHdhdGNoKCdtb2RlbCcsIGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICBzZWxlY3QyRWxlbWVudC5zZWxlY3QyKCd2YWwnLCB0b1N0cmluZyh2YWx1ZSkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICRzY29wZS4kd2F0Y2goJ25nRGlzYWJsZWQnLCBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgc2VsZWN0MkVsZW1lbnQuc2VsZWN0MignZW5hYmxlJywgIXZhbHVlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkc2NvcGUuJHdhdGNoKCd0cnVlRGVzY3JpcHRpb24nLCBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhWzBdLnRleHQgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIHNlbGVjdDJFbGVtZW50LnNlbGVjdDIoJ3ZhbCcsIHRvU3RyaW5nKCRzY29wZS5tb2RlbCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJHNjb3BlLiR3YXRjaCgnZmFsc2VEZXNjcmlwdGlvbicsIGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGRhdGFbMV0udGV4dCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgc2VsZWN0MkVsZW1lbnQuc2VsZWN0MigndmFsJywgdG9TdHJpbmcoJHNjb3BlLm1vZGVsKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gdG9Cb29sZWFuKHN0cikge1xyXG4gICAgICAgICAgICBpZiAoc3RyID09PSAndHJ1ZScpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChzdHIgPT09ICdmYWxzZScpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHRvU3RyaW5nKGJvb2xlYW4pIHtcclxuICAgICAgICAgICAgaWYgKGJvb2xlYW4gPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAndHJ1ZSc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGJvb2xlYW4gPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2ZhbHNlJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGluaXRTZWxlY3Rpb24oZWxlbWVudCwgY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgdmFyIGJvb2xlYW5WYWx1ZSA9IHRvQm9vbGVhbihzZWxlY3QyRWxlbWVudC5zZWxlY3QyKCd2YWwnKSk7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrKGJvb2xlYW5WYWx1ZSA9PT0gbnVsbCA/IG51bGwgOiBkYXRhW2Jvb2xlYW5WYWx1ZSA/IDAgOiAxXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KSgpO1xyXG4iXX0=
